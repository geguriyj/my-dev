<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>vue-todo</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <script type="text/javascript" src="https://vuejs.org/js/vue.js"></script>
</head>
<body>


<div class="container">

    <h1>my to do list</h1>

    <!-- todo template
    <div id="app-list">
        <ol>
            <li v-for="todo in todos">
                <button v-on:click="remove(todo.key)"> X </button> {{ todo.value }}
            </li>
        </ol>
    </div> -->

    <!-- todo component -->
    <div id="app-list">
        <ol>
            <todo-item v-for="todo in todos" v-bind:todo="todo"></todo-item>
        </ol>
    </div>


    <!-- input -->
    <div id="app-input">
        <input v-model="item" placeholder="input my to do item">
        <button v-on:click="add()">ADD</button>
    </div>



    <script type="text/javascript">

        var removeItem = function(key){
            appList.todos = appList.todos.filter(function(val){
                if(val.key !== key) return val;
            });
        };

        Vue.component('todo-item', {
            // The todo-item component now accepts a
            // "prop", which is like a custom attribute.
            // This prop is called todo.
            props: ['todo'],
            template: '<li><button v-on:click="remove(todo.key)"> X </button> {{ todo.value }}</li>',
            methods: {
                remove: function (key) {
                    removeItem(key);
                }
            }
        });


        var appList = new Vue({
            el: '#app-list',
            data: {
                todos: [
//                    { value: 'Learn JavaScript' },
//                    { value: 'Learn Vue' },
//                    { value: 'Build something awesome' }
                    { key : "key_0", value: 'Learn JavaScript' },
                    { key : "key_1", value: 'Learn Vue' },
                    { key : "key_2", value: 'Build something awesome' }
                ]
            },
            methods: {
                remove: function (key) {
                    removeItem(key);
                }
            }
        });

        var appInput = new Vue({
            el: '#app-input',
            data: {
                item : ""
            },
            methods: {
                add: function () {
                    appList.todos.push({"key" : "key_"+appList.todos.length, "value" : this.item});
                    this.item = "";
                },
                remove: function (key) {
                    removeItem(key);
                }
            }
        });


    </script>


</div>



</body>
</html>